<div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-bold text-gray-800">My Tasks</h2>

    <button *ngIf="taskList.length>0" (click)="openDialog()"
        class="bg-[#de483a] text-white px-4 py-2 rounded-lg font-medium hover:bg-[#c93c2e] transition flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        Add Task
    </button>
</div>

@for (task of taskList; track task.task_id) {
<div class="bg-white rounded-xl p-4 mb-3 shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
    <div class="flex flex-col md:flex-row md:items-center gap-4">
        <div class="flex-1">
            <div class="flex items-start gap-2 mb-2">
                <p class="text-lg font-medium" [ngClass]="{
                            'completed-task': task.status === 'complete',
                            'text-gray-800': task.status !== 'complete'
                              }">
                    {{ task.task_name }}
                </p>
            </div>

            <div class="flex items-center gap-4 text-sm text-gray-500">
                <div class="flex items-center gap-1">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    <span>{{ task.created_at | date:'mediumDate' }}</span>
                </div>
            </div>

        </div>

        <div class="flex flex-col sm:flex-row gap-2">
            <div class="relative">
                <select [value]="task.status" (change)="onStatusChange(task, $event)"
                    class="appearance-none rounded-lg px-4 py-2 pr-8 text-sm cursor-pointer outline-none" [ngClass]="{
                    ' font-bold bg-gray-300': task.status === 'to-do',
                    'font-bold bg-[#89AFEA]': task.status === 'in-progress',
                    ' font-bold bg-[#AAD46D]': task.status === 'complete'
                  }">
                    <option value="to-do">TO DO</option>
                    <option value="in-progress">IN PROGRESS</option>
                    <option value="complete">COMPLETE</option>
                </select>

                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                    </svg>
                </div>
            </div>
            <div class="flex gap-2">
                <button
                (click)="updateOpenDialog(task)"
                    class="flex-1 bg-[#de483a] text-white px-4 rounded-lg text-sm font-medium hover:bg-[#c93c2e] transition flex items-center justify-center gap-1">
                    <mat-icon>edit</mat-icon>
                    Update
                </button>

                <button (click)="onDelete(task.task_id)"
                    class="flex-1 bg-gray-100 text-gray-700 px-4 rounded-lg text-sm font-medium hover:bg-gray-200 transition flex items-center justify-center gap-1">
                    <mat-icon>delete</mat-icon>
                    Delete
                </button>
            </div>
        </div>
    </div>
</div>
}

<!-- Empty State -->
@empty {
<div class="text-center py-12">
    <div class="mx-auto w-24 h-24 text-gray-300 mb-4">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
        </svg>
    </div>
    <h3 class="text-lg font-medium text-gray-900 mb-2">No tasks found</h3>
    <p class="text-gray-500 mb-6">Get started by creating your first task!</p>
    <button
    (click)="openDialog()"
        class="bg-[#de483a] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#c93c2e] transition inline-flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        Create Task
    </button>
</div> }